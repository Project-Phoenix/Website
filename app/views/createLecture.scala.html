@(title : String)(lecture : de.phoenix.rs.entity.PhoenixLecture)
@head={
<!doctype html>
<!-- JQuery already loaded in _Structure.scala.html -->
<script type="text/javascript"  src="/assets/javascripts/jquery-1.9.0.min.js"></script>
<script src="/assets/javascripts/multipleInputs.js"></script>
<script type="text/javascript">
	var detail2 = false;
	var detail3 = false;
	var notNumber = /\D+/
	var splChars =/^.*?(?=[\^#%&$\*:;!\"ï¿½<>\?/\{\|\}@@]).*$/;
	

	$(document).ready(function(){
		for(var i = 2; i <= "@lecture.getLectureDetails().size()"; i++){
			$("#moreDetails").click();
		}	

		
		@for(index <- 0 to lecture.getLectureDetails().size()-1){
			document.getElementsByName("room_"+(@index+1).toString())[0].value = "@lecture.getLectureDetails().get(index).getRoom()";
			document.getElementsByName("day_"+(@index+1).toString())[0].selectedIndex = @lecture.getLectureDetails().get(index).getWeekday().getDateTimeConstant()-1;
			document.getElementsByName("startTime_"+(@index+1).toString())[0].value = "@lecture.getLectureDetails().get(index).getStartTime().toString("HH:mm")";
			document.getElementsByName("endTime_"+(@index+1).toString())[0].value = "@lecture.getLectureDetails().get(index).getEndTime().toString("HH:mm")";
			document.getElementsByName("startDate_"+(@index+1).toString())[0].value = "@lecture.getLectureDetails().get(index).getStartDate().toString("YYYY-MM-dd")";
			document.getElementsByName("endDate_"+(@index+1).toString())[0].value = "@lecture.getLectureDetails().get(index).getEndDate().toString("YYYY-MM-dd")";
								


			@if(lecture.getLectureDetails.get(index).getInterval().getDays() > 0){
				document.getElementsByName("period_"+(@index+1).toString())[0].value = @lecture.getLectureDetails().get(index).getInterval().getDays();
				document.getElementsByName("periodDD_"+(@index+1).toString())[0].selectedIndex = 0;
			}else{
				@if(lecture.getLectureDetails.get(index).getInterval().getWeeks() > 0){
				document.getElementsByName("period_"+(@index+1).toString())[0].value = @lecture.getLectureDetails().get(index).getInterval().getWeeks();
				document.getElementsByName("periodDD_"+(@index+1).toString())[0].selectedIndex = 1;
				}else{
					@if(lecture.getLectureDetails.get(index).getInterval().getMonths() > 0){
					document.getElementsByName("period_"+(@index+1).toString())[0].value = @lecture.getLectureDetails().get(index).getInterval().getMonths();
					document.getElementsByName("periodDD_"+(@index+1).toString())[0].selectedIndex = 2;
					}
				}
			}
		}
		
		
		$(document).on('change', '.Number', function(){	
			if(notNumber.test($(this).val())){
				$(this).val("0");
				alert('Bitte hier eine Nummer eingeben.'); 
			}
		});	
		
		$("#lectureDetail").on('change', '.Text', function(){	
			if(splChars.test($(this).val())){
				$(this).val('');
			    alert ("Illegal characters detected!"); 
			    $(this).focus(); 
			}
		})
		
		$("#title").change(function(){
			if(splChars.test($(this).val())){
				$(this).val('');
			    alert ("Illegal characters detected!"); 
			    $(this).focus(); 
			}
		});
	});

	function checkLecture(inhalt)
	{
		$.get('/existLecture',
			      {'title': inhalt})
			      .success(function(data) {
		    		  	alert("Diese Veranstaltung ist schon vorhanden!");
		        	  	$("#title").val("");
			      })
	}
	
</script>
}

@_Structure(title)(head){
	
	<form action="/sendLecture" method="post" onsubmit="return ValidateForm(this);" id="form1">
	
		<input type="hidden" name="oldLecture" value="@lecture.getTitle()"/>
		Titel:&nbsp;&nbsp;&nbsp;<input type="text" name="title" value="@lecture.getTitle()" id="title" class="Text" onchange="checkLecture(this.value)"><br><br>
		<div id="lectureDetail">
			<div>
			Raum: <input type="text" name="room_1" class="Text"><br><br>
			<select name="day_1" size="1">
				<option value="monday" checked>Montag</option>
				<option value="tuesday">Dienstag</option>
				<option value="wednesday">Mittwoch</option>
				<option value="thursday">Donnerstag</option>
				<option value="friday">Freitag</option>
				<option value="saturday">Samstag</option>
				<option value="sunday">Sonntag</option>
		    </select><br><br>		    
			Startzeit:<input type="time" name="startTime_1" value="00:00"><br><br>
			Endzeit: <input type="time" name="endTime_1" value="00:00"><br><br>
			
			Periode:<input type="text" name="period_1" value="0" class="Number"/>
			    <select name="periodDD_1" size="1">
			      <option value="days">Tag(e)</option>
			      <option value="weeks" selected>Woche(n)</option>
			      <option value="months">Monat(e)</option>
			    </select><br><br>
			
			Startdatum:<input type="date" name="startDate_1" value="2000-01-01" min="1584-01-01" max="9998-12-31"><br><br>			
			Enddatum:<input type="date" name="endDate_1" value="2000-01-01" min="1584-01-01" max="9998-12-31"><br><br>
			<input type="button" class="removeDetails" value="Detail l&ouml;schen"/></div>
		</div>		
		<input type="button" id="moreDetails" value="mehr DETAILS!"/>
		<br>
		<input id="Create" name="submit" type="submit" value="Create" />
		<input id="Update" name="submit" type="submit" value="Update" />	
	</form> 
	
	
}